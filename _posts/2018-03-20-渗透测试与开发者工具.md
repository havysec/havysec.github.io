---
layout: post
title: 渗透测试与开发者工具
date: 2018-03-20
tags: 学而不思则罔  
---

![browsers][1]


<br>

### 介绍：

您是否可以使用浏览器执行Web应用程序安全测试？ 想一想你必须从一个非常有限的环境中进行安全测试的场景，在这个环境中，你无法访问运行脚本或工具，而你只有一台浏览器。 本指南将从这种锁定的方案着眼于Web应用程序安全性测试。 目标是尽可能多地从浏览器中覆盖安全测试用例。 尽管从浏览器执行所有与Web应用程序相关的安全测试用例是不可能的，但在相同的帮助下可以保证一定的覆盖率。 仅靠浏览器无法取代涉及代理和扫描程序的传统Web应用程序安全测试方法。 从不建议完全依赖可以从浏览器完成的安全测试。

本指南的其他潜在用例之一是准备安全测试报告。 任何漏洞发现的最重要的部分是“再现步骤”。 大多数安全专业人员在此步骤中广泛使用Burp Suite或ZAP等工具。 但是，安全测试的主要受众（包括开发人员）不会对设置代理和类似工具有足够的了解 - 这使得他们的安全漏洞复制变得困难。 事实上，您可能会参加笔后测试会议，利益相关方会要求您减少发生漏洞的可能性，因为利用这些漏洞需要设置代理。 阅读本指南后，您将能够通过涉及浏览器的简单步骤重新编写大部分这些文章 - 测试报告的目标受众中几乎每个人都可以访问这些步骤。

需要指出的是，这项研究仅关注所有与Web应用程序安全相关的测试，只需使用浏览器的本地功能即可完成。 这并不包括这些浏览器在扩展的帮助下可以做些什么。 现在几乎所有的主流浏览器都支持安装扩展，并且有很多更强大的功能可以在它们的帮助下完成，本文不会涉及。


### 实践:  


`Firefox`和`Chrome`浏览器,[当前测试版本下载地址](https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/attach/browsers.zip)

随便访问一个页面，看看`Web开发者工具箱`，这个是浏览器自带的开发者工具。

![][5]

快捷键:`F12`、`Ctrl shift i`两者其中之一

### 下面介绍一些其他浏览器或者其他的打开方式    


* 按`Cmd + Shift + I`Mac    
* 右键单击网页，然后在Google Chrome上选择检查(inspect)。   
* 点击kabob菜单，然后导航到Google Chrome上的更多工具和开发者工具。  
* 右键单击网页，然后在Mozilla Firefox上选择检查元素。  
* 点击汉堡菜单，然后导航到Web Developer，然后在Mozilla Firefox上切换工具。  
* 通过点击齿轮图标，然后导航到Edge/IE上的F12 Developer Tools。  


### 开发者工具的主要功能如下：

* Switching User Agents
* Edit and Replay Requests
* Editing Cookies
* Editing Local Storage
* Disable CSS
* Disable Javascript
* View Headers
* Native screen-shot capture
* Offline mode
* Encode and Decode

### 那么对应不同的浏览器功能是否一样呢？看下表

![][6]

所以这里我们主要以`Chrome`和`Firfox`为例

## Switching User Agents


### Mozilla Firefox: Switching User Agents  

* 浏览到Firefox的`about:config`页面，点击我接受风险！
* 在搜索字段中输入useragent。
* 查找`general.useragent.override`，如果您看不到此首选项，请右键单击`about:config`页面> New> String
* 将首选项命名为`general.useragent.override`
* 右键单击`general.useragent.override`首选项并选择`Reset`以切换回默认用户代理。

### 查看自己当前的useragent

首先我们访问`http://www.atool.org/useragent.php`查看自己当前的`useragent`

![][7]

OK!接下来就是一步一步更改`useragent`了

![][8]

可见`useragent`已经更改了


### Google Chrome: Switching User Agents

* 打开浏览器的开发者工具
* 点击更多工具选择`Network Conditions`

![][9]

下面分别介绍其他的浏览器的更改方式，一笔带过感兴趣的自己操作一遍。

### Edge/IE: Switching User Agents


* 打开浏览器的开发者工具
* 点击`Emulation`标签选择`useragent`


接下来介绍如何用开发者工具`编辑和重放请求`

## Edit and Replay Requests

### Mozilla Firefox: Edit and Replay Requests

* 打开浏览器的开发者工具
* 点击`Network`标签
* 刷新或者提交数据
* 在请求上面右键点击`Edit and Resend`
* 修改数据后点击`Send`按钮
* 右键在新标签打开

由于之前申请环境的时候有一个内网地址，可以看看，根据实际情况的不同，我这里是`172.18.0.13`

![][10]

这里我们在更改数据的时候同时更改了`password`字段以及`user_token`字段，这里是因为做了`csrf`验证。详细原理可以自行学习相关知识。


## Editing Cookies

### Mozilla Firefox: Editing Cookies

* 打开浏览器的开发工具
* 点击`Storage`选项卡
* 导航到Cookies，然后选择应用程序域
* 双击任何cookie值以编辑它们

首先访问`http://www.w3school.com.cn/tiy/t.asp?f=hdom_document_cookie`测试当前的`cookie`值

![][11]

成功修改`Cookie`的值,但是由于这里刷新一次服务器就会`response`一个原来的值，所以再刷新一次他就变成原来的`1`


### Google Chrome: Editing Cookies

* 打开浏览器的开发工具
* 点击`Application`选项卡
* 导航到Cookies，然后选择应用程序域
* 双击任何cookie值以编辑它们


PS:经过测试，有些网站不行。建议用`Firefox`编辑`Cookie`

### Edge/IE: Editing Cookies

* 打开浏览器的开发工具
* 点击`Debugger`选项卡
* 导航到Cookies，然后选择应用程序域
* 双击任何cookie值以编辑它们

## Editing Local Storage

跟`Cookie`类似，不再演示。


## Disable JavaScript

### Google Chrome: Disable JavaScript

* 打开浏览器的开发工具
* 点击三个点菜单然后选择`Settings`
* 找到`Preferences`选择项
* 在`Debugger`里面，选中`Disable JavaScript`

![][12]


### Mozilla Firefox: Disable JavaScript

* 打开浏览器的开发工具
* 点击右侧的设置图标
* 然后在高级选项下面找到禁止`JavaScript`

![][13]  

## Viewing Headers

### Google Chrome: Viewing Headers

* 打开浏览器的开发工具
* 找到`Network`选项
* 执行任何动作对于web应用程序
* 任意找文件查看

![][14]  

### Mozilla Firefox: Viewing Headers

* 打开浏览器的开发工具
* 点击`Network`选项
* 执行任何动作对于web应用程序
* 任意找文件查看

![][15]  

### Edge/IE: Viewing Headers

* 打开浏览器的开发工具
* 点击`Network`选项
* 点击`Play`按钮
* 执行任何动作对于web应用程序
* 点击`Stop`按钮
* 选择一个页面文件点击`Details`

## Capture Screen-shots

### Google Chrome: Capture Screen-shots

* 打开浏览器的开发工具
* 点击`Toogle device toolbar`
* 点击右上角三个小点点选择`Capture screenshot`

![][16]  

### Mozilla Firefox: Capture Screen-shots

![][17]  

### Edge/IE: Capture Screen-shots

* 点击笔一样的按钮，在顶端
* 找到剪刀一样的按钮点击


## Offline mode

### Google Chrome: Offline mode

* 打开浏览器的开发工具
* 点击`Network`选项
* 选中`Offline`选项


### Mozilla Firefox: Offline mode

* 选择开发者工具后最下面的`Work Offline`


## Encode and Decode

浏览器的`console`有基本的加解密功能

|    Function     | Code |
| ----------      | --- |
| Base64 encode   |  btoa("string-to-encode") |
| Base64 decode   |  atob("string-to-decode") |
| URL encode      |  encodeURIComponent("string-to-encode") |
| URL decode      |  decodeURIComponent("string-to-decode") |
| HTML encode     |  escape("string-to-encode") |
| HTML decode     |  unescape("string-to-decode") |



![][18]





----------
> 这个世界不缺伟大和成功

> 而我的世界也不怕失败者

> 何不让我追求 我的快乐

>   - 来自林宥嘉《飞》


<br>

[1]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/1.png
[5]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/5.gif
[6]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/6.gif
[7]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/7.gif
[8]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/8.gif
[9]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/9.gif
[10]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/10.gif
[11]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/11.gif
[12]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/12.gif
[13]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/13.gif
[14]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/14.gif
[15]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/15.gif
[16]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/16.gif
[17]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/17.gif
[18]:https://raw.githubusercontent.com/havysec/havysec.github.io/master/_posts/post_image/2018-03-20/18.gif
